# Automating SBOM Generation in CI/CD

## Learning Outcomes:

By the end of this lab, participants will be able to:

- Understand the importance of automating SBOM generation in CI/CD pipelines.
- Set up a GitHub Actions workflow for SBOM generation.
- Use Syft to generate SBOMs in a CI/CD environment.
- Configure artifact uploading in GitHub Actions.
- Interpret and utilize the generated SBOM in a CI/CD context.
---
## Follow the instructions below to configure your GitHub credential before going to the next questions.

Open the lab console and configure following environment variables with your own GitHub account information:

vi /root/github_repo_info.json
{
    "REPO_OWNER": "your_username_here",
    "ACCESS_TOKEN": "your_access_token_here"
}

The provided information will solely be utilized for validating your response in the next question. Please note, we do not retain this information for any other purposes.


Refer to this document if you're not sure how to get your own access token: Managing your personal access tokens
---

Fork the Repository - https://github.com/iampsrv/supply_chain_security to use as a starting point.

Note that the Repository name is supply_chain_security (do not change it).
Go through the repository. It contains nginx-sbom.json, nginx-spdx.sbom and a .github/workflows directory.
Explore the main.yml file.
Enable GitHub Actions



Is the supply_chain_security repository forked successfully?

Is the GitHub Actions enabled?
---


---
Modify the workflow in main.yml to generate an SBOM report for the docker.io/kodekloud/webapp-color:latest image in SPDX-JSON format and store it in spdx.json.

Also, change actions/upload-artifact@v3 to actions/upload-artifact@v4.
---




Modify the workflow in main.yml to upload the artifact spdx.json in the Upload SBOM Artifact step and configure the workflow to trigger manually.


NOTE: After committing the changes, monitor the workflow to observe the process.
Note: It may take some time for the artifact to be ready. Validation attempts will fail until the artifact becomes available.



Is the workflow modified to trigger manually?

Is the spdx.json artifact created by workflow?

---

Steps to Download the Artifact from the Workflow via GitHub UI
1. Navigate to Your Repository
Go to the GitHub repository where the workflow is running.
2. Go to the Actions Tab
In the repository, click on the Actions tab at the top.
This will display a list of all recent workflow runs for this repository.
3. Select the Workflow Run
Locate the specific workflow run you want (e.g., "Generate SBOM Report with Syft").
Click on the workflow name or the commit message associated with the workflow to open the run details.
4. View Workflow Job Details
On the workflow run page, you’ll see the jobs that ran (e.g., generate-sbom).
Click on the job name to see more details of the job’s steps and logs.
5. Locate the Artifact Section
Scroll down to the bottom of the workflow run page.
Under the Artifacts section, you’ll find the list of artifacts generated by this workflow (e.g., sbom-report).
6. Download the Artifact
Click on the artifact name (e.g., sbom-report).
The artifact will be downloaded as a .zip file, which you can then unzip to access its contents.
7. Examine the SBOM artifact.
By following these steps, you can access and download artifacts from your workflow run directly through the GitHub UI.





